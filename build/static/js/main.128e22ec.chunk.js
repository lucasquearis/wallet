(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{31:function(e,t,a){e.exports=a(42)},36:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),i=a.n(c),l=a(17),o=(a(36),a(12)),u=a(3),s=a(4),d=a(6),h=a(5),p=a(7),m=a(14),b=a(1),E=a(9);function v(e,t){return{type:"EDIT_FORM",editFormBoolean:e,idEdit:t}}var f=function(e){return function(t){fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()})).then((function(a){return t(e?function(e){return{type:"UPDATE_EXPENSES",expenses:e}}(Object(b.a)(Object(b.a)({},e),{},{exchangeRates:a})):function(e){return{type:"GET_API_SUCCESS",currencies:Object.keys(e).filter((function(e){return"USDT"!==e}))}}(a))})).catch((function(e){return t(function(e){return{type:"GET_API_ERROR",error:e}}(e))}))}},O=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editBoolean,a=e.handleClick,n=e.updateExpense;return r.a.createElement("button",{onClick:t?n:a,type:"button"},t?"Editar despesa":"Adicionar despesas")}}]),a}(n.Component),j=Object(o.b)((function(e){return{editBoolean:e.wallet.editFormBoolean}}))(O),y=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.valueInput,a=e.handleChange;return r.a.createElement("label",{htmlFor:"value"},"Valor:",r.a.createElement("input",{"data-testid":"value-input",name:"value",onChange:a,type:"number",id:"value",value:t}))}}]),a}(n.Component),g=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.valueInput,a=e.handleChange;return r.a.createElement("label",{htmlFor:"description"},"Descri\xe7\xe3o:",r.a.createElement("input",{"data-testid":"description-input",name:"description",onChange:a,id:"description",type:"text",value:t}))}}]),a}(n.Component),C=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.valueInput,a=e.handleChange,n=e.value;return r.a.createElement("label",{htmlFor:"currency"},"Moeda:",r.a.createElement("select",{"data-testid":"currency-input",value:n,name:"currency",onChange:a,id:"currency"},t.map((function(e,t){return r.a.createElement("option",{key:t},e)}))))}}]),a}(n.Component),k=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleChange,a=e.value;return r.a.createElement("label",{htmlFor:"method"},"M\xe9todo de pagamento",r.a.createElement("select",{"data-testid":"method-input",value:a,name:"method",onChange:t,id:"method"},["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"].map((function(e,t){return r.a.createElement("option",{key:t},e)}))))}}]),a}(n.Component),w=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleChange,a=e.value;return r.a.createElement("label",{htmlFor:"tag"},"Tag",r.a.createElement("select",{"data-testid":"tag-input",value:a,name:"tag",onChange:t,id:"tag"},["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"].map((function(e,t){return r.a.createElement("option",{key:t},e)}))))}}]),a}(n.Component),x={value:0,description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},B=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).state=x,e.handleChange=e.handleChange.bind(Object(E.a)(e)),e.renderForm=e.renderForm.bind(Object(E.a)(e)),e.handleClick=e.handleClick.bind(Object(E.a)(e)),e.editButton=e.editButton.bind(Object(E.a)(e)),e.updateExpense=e.updateExpense.bind(Object(E.a)(e)),e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.fetchMoedas)()}},{key:"componentDidUpdate",value:function(){this.props.editable&&this.editButton()}},{key:"setColorForm",value:function(){return this.props.editFormBoolean?"fieldset-form-edit":"fieldset-form"}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value,r=this.props.successApi;this.setState((function(e){var t;return Object(b.a)(Object(b.a)({},e),{},(t={},Object(m.a)(t,a,n),Object(m.a)(t,"exchangeRates",r),t))}))}},{key:"handleClick",value:function(){(0,this.props.fetchMoedas)(this.state),this.setState(x)}},{key:"updateExpense",value:function(){var e=this.props,t=e.edit,a=e.setBoolean,n=e.editFormBoolean;t(this.state),a(!n),this.setState(x)}},{key:"editButton",value:function(){var e=this.props,t=e.expenses,a=e.idEdit,n=e.setEditable,r=t.find((function(e){return e.id===a})),c=r.value,i=r.description,l=r.currency,o=r.method,u=r.tag;n(!1),this.setState({value:c,description:i,currency:l,method:o,tag:u})}},{key:"renderForm",value:function(){var e=this.state,t=e.description,a=e.value,n=e.currency,c=e.method,i=e.tag,l=this.props.currencies;return r.a.createElement("fieldset",{className:this.setColorForm()},r.a.createElement(y,{valueInput:a,handleChange:this.handleChange}),r.a.createElement(g,{valueInput:t,handleChange:this.handleChange}),r.a.createElement(C,{valueInput:l,handleChange:this.handleChange,value:n}),r.a.createElement(k,{handleChange:this.handleChange,value:c}),r.a.createElement(w,{handleChange:this.handleChange,value:i}),r.a.createElement(j,{handleClick:this.handleClick,editButton:this.editButton,updateExpense:this.updateExpense,state:this.state}))}},{key:"render",value:function(){return this.renderForm()}}]),a}(n.Component),S=Object(o.b)((function(e){return{currencies:e.wallet.currencies,successApi:e.wallet.successApi,expenses:e.wallet.expenses,idEdit:e.wallet.idEdit,editFormBoolean:e.wallet.editFormBoolean}}),(function(e){return{fetchMoedas:function(t){return e(f(t))},edit:function(t){return e(function(e){return{type:"EDIT_EXPENSE",state:e}}(t))},setBoolean:function(t){return e(v(t))}}}))(B),F=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).state={editable:!1},e.handleButtonEdit=e.handleButtonEdit.bind(Object(E.a)(e)),e.setEditable=e.setEditable.bind(Object(E.a)(e)),e}return Object(s.a)(a,[{key:"setEditable",value:function(e){this.setState({editable:e})}},{key:"handleButtonEdit",value:function(e){var t=this.props,a=t.edit,n=t.editBoolean;this.setState({editable:!0}),a(!n,e)}},{key:"tableBody",value:function(){var e=this,t=this.props,a=t.expenses,n=t.del,c=t.editBoolean;return r.a.createElement("tbody",null,a.map((function(t){var a=t.description,i=t.tag,l=t.method,o=t.value,u=t.exchangeRates[t.currency].name,s=(+t.exchangeRates[t.currency].ask).toFixed(2),d=(t.value*t.exchangeRates[t.currency].ask).toFixed(2);return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,a),r.a.createElement("td",null,i),r.a.createElement("td",null,l),r.a.createElement("td",null,o),r.a.createElement("td",null,u),r.a.createElement("td",null,s),r.a.createElement("td",null,d),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{"data-testid":"delete-btn",type:"button",onClick:function(){return n(t.id)},disabled:c},"Excluir"),r.a.createElement("button",{"data-testid":"edit-btn",type:"button",disabled:c,onClick:function(){return e.handleButtonEdit(t.id)}},"Editar")))})))}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value,r=this.props.successApi;this.setState((function(e){var t;return Object(b.a)(Object(b.a)({},e),{},(t={},Object(m.a)(t,a,n),Object(m.a)(t,"exchangeRates",r),t))}))}},{key:"render",value:function(){var e=this.state.editable;return r.a.createElement("div",null,r.a.createElement(S,{editable:e,setEditable:this.setEditable}),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),this.tableBody()))}}]),a}(n.Component),T=Object(o.b)((function(e){return{expenses:e.wallet.expenses,editBoolean:e.wallet.editFormBoolean,currencies:e.wallet.currencies}}),(function(e){return{del:function(t){return e({type:"DELETE_EXPENSE",id:t})},edit:function(t,a){return e(v(t,a))}}}))(F),R=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"calculateTransaction",value:function(){return this.props.expenses.map((function(e){return e.exchangeRates[e.currency].ask*e.value})).reduce((function(e,t){return e+t}),0)}},{key:"render",value:function(){var e=r.a.createElement("p",{"data-testid":"total-field"},"Despesa total: ".concat(0)),t=r.a.createElement("p",{"data-testid":"total-field"},"Despesa total: ".concat(this.calculateTransaction().toFixed(2)));this.calculateTransaction();var a=this.props,n=a.email,c=a.expenses;return r.a.createElement("main",{className:"main-container"},r.a.createElement("header",{className:"header-main"},r.a.createElement("div",{className:"div-info-header"},r.a.createElement("p",null,"Email: "),r.a.createElement("p",{"data-testid":"email-field"},n)),r.a.createElement("div",{className:"div-info-header"},c.length>0?t:e),r.a.createElement("div",{className:"div-info-header"},r.a.createElement("p",{"data-testid":"header-currency-field"},"Moeda Atual: BRL"))),r.a.createElement(T,null))}}]),a}(r.a.Component),D=Object(o.b)((function(e){return{email:e.user.email,currencies:e.wallet.currencies,expenses:e.wallet.expenses}}),null)(R),_=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={email:"",password:""},n.handleClick=n.handleClick.bind(Object(E.a)(n)),n.handleChange=n.handleChange.bind(Object(E.a)(n)),n}return Object(s.a)(a,[{key:"buttonEnable",value:function(){this.setState({buttonDisable:!1})}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(m.a)({},a,n))}))}},{key:"checkLogin",value:function(){return this.checkEmail()&&this.checkPassword()}},{key:"checkEmail",value:function(){var e=this.state.email;return/^[a-z0-9_.-]+@[a-z]+\.[a-z]{2,3}(?:\.[a-z]{2})?$/.test(e)}},{key:"checkPassword",value:function(){return this.state.password.length>=6}},{key:"handleClick",value:function(){var e=this.state,t=e.email,a=e.password;(0,this.props.setNewTaskToStore)({email:t,password:a})}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("div",{className:"div-login"},r.a.createElement("fieldset",{className:"fieldset-login"},r.a.createElement("label",{htmlFor:"email-input"},"Email:",r.a.createElement("input",{name:"email","data-testid":"email-input",onChange:this.handleChange,value:t})),r.a.createElement("label",{htmlFor:"password-input"},"Senha:",r.a.createElement("input",{name:"password",type:"password","data-testid":"password-input",onChange:this.handleChange,value:a})),r.a.createElement(l.b,{to:"/wallet/carteira"},r.a.createElement("button",{type:"button",disabled:!this.checkLogin(),onClick:this.handleClick},"Entrar"))))}}]),a}(n.Component),N=Object(o.b)((function(e){return{email:e.user.email,password:e.user.password}}),(function(e){return{setNewTaskToStore:function(t){return e({type:"LOGIN_USER",email:(a=t).email,password:a.password});var a}}}))(_),I=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(N,null)}}]),a}(r.a.Component),A=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/wallet"},r.a.createElement(I,null)),r.a.createElement(p.a,{path:"/wallet/carteira"},r.a.createElement(D,null)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=a(15),M=a(29),U=a(30),L={email:"",password:""};var G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return Object(b.a)(Object(b.a)({},e),{},{email:t.email,password:t.password});default:return Object(b.a)({},e)}},z=a(25),X={currencies:[],expenses:[],error:null,idEdit:0,editFormBoolean:!1};var V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_API":return Object(b.a)({},e);case"GET_API_SUCCESS":return Object(b.a)(Object(b.a)({},e),{},{currencies:t.currencies,successApi:t.successApi});case"GET_API_ERROR":return Object(b.a)(Object(b.a)({},e),{},{error:e.error});case"UPDATE_EXPENSES":return Object(b.a)(Object(b.a)({},e),{},{expenses:[].concat(Object(z.a)(e.expenses),[Object(b.a)({id:e.expenses.length},t.expenses)])});case"DELETE_EXPENSE":return Object(b.a)(Object(b.a)({},e),{},{expenses:Object(z.a)(e.expenses.filter((function(e){return t.id!==e.id})))});case"EDIT_FORM":return Object(b.a)(Object(b.a)({},e),{},{editFormBoolean:t.editFormBoolean,idEdit:t.idEdit});case"EDIT_EXPENSE":return Object(b.a)(Object(b.a)({},e),{},{expenses:e.expenses.map((function(a){return e.idEdit===a.id?Object(b.a)(Object(b.a)(Object(b.a)({},a),t.state),{},{exchangeRates:a.exchangeRates}):a}))});default:return Object(b.a)({},e)}},W=Object(P.combineReducers)({user:G,wallet:V}),J=Object(P.createStore)(W,Object(M.composeWithDevTools)(Object(P.applyMiddleware)(U.a)));i.a.render(r.a.createElement(l.a,null,r.a.createElement(o.a,{store:J},r.a.createElement(A,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.128e22ec.chunk.js.map